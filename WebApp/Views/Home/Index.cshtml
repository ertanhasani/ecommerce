@model WebApp.ViewModels.HomeModel
@{
    ViewData["Title"] = "خانه";
}

<div data-section="Slider" class="main-slider section">

    <div class="container">

        @if (Model.Carousels.Any(x => x.PageName == "Home" && x.SectionName == "Slider"))
        {
            <div id="mainCarousel" class="carousel slide col-md-6 col-sm-12 col-xs-12" data-ride="carousel">

                @{ var carousels = Model.Carousels.Where(x => x.PageName == "Home" && x.SectionName == "Slider").ToArray(); }

                <ol class="carousel-indicators">

                    @for (int i = 0; i < carousels.Length; i++)
                    {
                        <li data-target="#mainCarousel" data-slide-to="@i" class="@(i == 0 ? "active" : "")"></li>
                    }

                </ol>

                <div class="carousel-inner">

                    @for (int i = 0; i < carousels.Length; i++)
                    {
                        <div class="carousel-item @(i == 0 ? "active" : "")">

                            <img class="catalog-pic" src="@carousels[i].Path" alt="@carousels[i].Name">

                            <div class="container">

                                <div class="carousel-caption text-left">

                                </div>

                            </div>

                        </div>
                    }

                </div>

                <a class="carousel-control-prev" href="#mainCarousel" role="button" data-slide="prev">

                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>

                    <span class="sr-only">Previous</span>

                </a>

                <a class="carousel-control-next" href="#mainCarousel" role="button" data-slide="next">

                    <span class="carousel-control-next-icon" aria-hidden="true"></span>

                    <span class="sr-only">Next</span>

                </a>

            </div>
        }


        @if (Model.Carousels.Any(x => x.PageName == "Home" && x.SectionName == "Catalog"))
        {
            <div class="catalog-holder">

                @foreach (var items in Model.Carousels.Where(x => x.PageName == "Home" && x.SectionName == "Catalog"))
                {
                    <a class="catalog-container" style="background: @items.Style" href="@items.Link">

                        <h3>@items.Title</h3>

                        <p>@items.ShortDescription</p>

                        <img class="catalog-pic fadeTop" src="@items.Path" alt="@items.Name"/>

                    </a>
                }


            </div>
        }


    </div>

</div>

<div data-section="main-product" class="album contenti section">

    <div class="container">

        <div class="row" style="justify-content: space-evenly;">

            @foreach (var item in Model.Products)
            {
                <div class="product-wrapper">

                    <div class="item">

                        <a href="@item.Url">

                            <img src="@item.ImagePath" alt="Thumbnail" data-holder-render="true"/>

                        </a>

                        <div class="product-description">

                            <p class="Category">@item.ProdoctCategories</p>

                            <a href="@item.Url">@item.Title</a>

                            <div class="button-container">

                                <div class="price">

                                    @if (item.IsOnSale)
                                    {
                                        <h4 class="currentPrice"> @item.SalePrice</h4>

                                        <label class="oldPrice"> @item.Price</label>
                                    }
                                    else
                                    {
                                        <h4 class="currentPrice"> @item.Price</h4>
                                    }

                                </div>

                                <div class="action text-center">

                                    <a href="@item.Url" class="btn">خرید</a>

                                </div>

                            </div>

                        </div>

                    </div>

                </div>
            }

        </div>

    </div>

</div>

@if (Model.Carousels.Any(x => x.PageName == "Home" && x.SectionName == "Feature"))
{
    <div data-section="Feature" class="feature-slider section">

        <div class="row feature-row">

            <div class="container feature-container">

                @foreach (var items in Model.Carousels.Where(x => x.PageName == "Home" && x.SectionName == "Feature"))
                {
                    <a class="feature-holder @items.Style" href="@items.Link">

                        <div class="feature-circle">

                            <div class="feature-icon fa @items.ShortDescription">

                            </div>

                        </div>

                        <h4 class="feature-title">@items.Title</h4>

                    </a>
                }

            </div>

        </div>

    </div>
}

<div data-section="sale-off-product" class="album contenti section">

    <div class="container">

        <div class="row" style="justify-content: space-evenly;">

            @foreach (var item in Model.Products)
            {
                <div class="product-wrapper">


                    <div class="item">

                        <a href="@item.Url">

                            <img src="@item.ImagePath" alt="Thumbnail" data-holder-render="true"/>

                        </a>

                        <div class="product-description">

                            <p class="Category">@item.ProdoctCategories</p>

                            <a href="@item.Url">@item.Title</a>

                            <div class="button-container">

                                <div class="price">

                                    @if (item.IsOnSale)
                                    {
                                        <h4 class="currentPrice"> @item.SalePrice</h4>

                                        <label class="oldPrice"> @item.Price</label>
                                    }
                                    else
                                    {
                                        <h4 class="currentPrice"> @item.Price</h4>
                                    }

                                </div>

                                <div class="action text-center">

                                    <a href="@item.Url" class="btn">خرید</a>

                                </div>

                            </div>

                        </div>

                    </div>

                </div>
            }

        </div>

    </div>

</div>

@if (Model.Carousels.Any(x => x.PageName == "Home" && x.SectionName == "Description"))
{
    <div data-section="Description" class="description-slider section">

        <div class="row description-row">

            <div class="container description-container">

                @foreach (var items in Model.Carousels.Where(x => x.PageName == "Home" && x.SectionName == "Description"))
                {
                    <div class="description-holder @items.Style">

                        <div class="description-box">

                            <h4 class="description-title">@items.Title</h4>

                            <p class="description-item">@items.ShortDescription</p>


                        </div>

                    </div>
                }

            </div>

        </div>

    </div>
}

@if (Model.Carousels.Any(x => x.PageName == "Home" && x.SectionName == "Question"))
{
    <div data-section="Question" class="question-slider section">

        <div class="row question-row">

            <h2 class="question-title">سوالات متداول</h2>

            @foreach (var items in Model.Carousels.Where(x => x.PageName == "Home" && x.SectionName == "Question"))
            {
                <div class="container question-container @items.Style">

                    <button class="question">@items.Title</button>

                    <div class="question-content">

                        <p>@items.Description</p>

                    </div>

                </div>
            }


        </div>

    </div>
}


@section Styles{

    <link href="~/css/ProductList.css" rel="stylesheet"/>
    <link href="~/css/MainPage.css" rel="stylesheet"/>

}

@section Scripts{

    <script>
    
    $(function() {
        
      const coll = $(".question");
      
      let i;
      
      for (i = 0; i < coll.length; i++) {
          
        coll[i].addEventListener("click", function() {
            
          this.classList.toggle("active");
          
          let content = this.nextElementSibling;
          
          if (content.style.maxHeight){ 
            content.style.maxHeight = null;
          } 
          else {
            content.style.maxHeight = content.scrollHeight + "px";
          } 
        });
      }
    })
    
    </script>
}